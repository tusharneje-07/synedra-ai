<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Multi-Agent Post Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/css/output.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab { padding: 0.75rem 1.5rem; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab:hover { background-color: hsl(240 3.7% 15.9%); }
        .tab.active { border-bottom-color: #3b82f6; color: #3b82f6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="min-h-screen">
    <!-- Navigation -->
    <header class="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
        <div class="container flex h-16 items-center">
            <div class="mr-4 flex">
                <a href="/" class="mr-6 flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></svg>
                    <span class="hidden font-bold sm:inline-block">Multi-Agent Post Generator</span>
                    <span class="font-bold sm:hidden">Post Gen</span>
                </a>
            </div>
            <nav class="flex items-center space-x-4 lg:space-x-6 text-sm font-medium ml-auto">
                <a href="/" class="transition-colors hover:text-foreground/80 text-foreground/60">
                    Brand Config
                </a>
                <a href="/create-post" class="transition-colors hover:text-foreground/80 text-foreground/60">
                    Create Post
                </a>
                <a href="/saved-posts" class="transition-colors hover:text-foreground/80 text-foreground/60">
                    Saved Posts
                </a>
                <a href="/settings" class="transition-colors hover:text-foreground/80 text-foreground">
                    Settings
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container py-6 lg:py-10">
        <!-- Header -->
        <div class="flex flex-col space-y-2 mb-8">
            <h1 class="scroll-m-20 text-3xl font-extrabold tracking-tight lg:text-4xl">
                Settings
            </h1>
            <p class="text-lg text-muted-foreground">
                Manage your brand configurations, agents, API keys, and model preferences
            </p>
        </div>

        <!-- Tabs -->
        <div class="card mb-6">
            <div class="flex border-b border-border">
                <div class="tab active" onclick="switchTab('brand')">
                    <svg class="w-5 h-5 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="13.5" cy="6.5" r=".5"></circle><circle cx="17.5" cy="10.5" r=".5"></circle><circle cx="8.5" cy="7.5" r=".5"></circle><circle cx="6.5" cy="12.5" r=".5"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path></svg>
                    Brand Config
                </div>
                <div class="tab" onclick="switchTab('agents')">
                    <svg class="w-5 h-5 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    Agents
                </div>
                <div class="tab" onclick="switchTab('api')">
                    <svg class="w-5 h-5 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                    API Keys
                </div>
                <div class="tab" onclick="switchTab('model')">
                    <svg class="w-5 h-5 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m5.2-13.2l-4.3 4.3m0 6l4.3 4.3M23 12h-6m-6 0H1m18.2 5.2l-4.3-4.3m0-6l4.3-4.3"></path></svg>
                    Model Selection
                </div>
            </div>
        </div>

            <!-- Brand Config Tab -->
            <div id="brand-tab" class="tab-content active">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Brand Configuration</h2>
                    <div id="brand-list" class="space-y-4">
                        <!-- Brands will be loaded here -->
                    </div>
                    <button onclick="showAddBrandModal()" class="btn btn-primary mt-4">
                        <svg class="w-4 h-4 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Add New Brand
                    </button>
                </div>
            </div>

            <!-- Agents Tab -->
            <div id="agents-tab" class="tab-content">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Agent Configuration</h2>
                    <div id="agent-list" class="space-y-4">
                        <!-- Agents will be loaded here -->
                    </div>
                    <button onclick="showAddAgentModal()" class="btn btn-primary mt-4">
                        <svg class="w-4 h-4 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Add New Agent
                    </button>
                </div>
            </div>

            <!-- API Keys Tab -->
            <div id="api-tab" class="tab-content">
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h2 class="text-xl font-semibold">API Key Pool</h2>
                            <p class="text-sm text-muted-foreground mt-1">Manage multiple API keys for load balancing and failover</p>
                        </div>
                        <button onclick="testAllApiKeys()" class="btn btn-primary">
                            <svg class="w-4 h-4 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                            Test All Keys
                        </button>
                    </div>
                    
                    <div id="api-key-list" class="space-y-3 mb-4">
                        <!-- API keys will be loaded here -->
                    </div>
                    
                    <div class="border-t border-border pt-4 mt-4">
                        <h3 class="font-semibold mb-3">Add New API Key</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2">Key Name</label>
                                <input type="text" id="new-api-key-name" placeholder="e.g., Production Key 1" class="input">
                            </div>
                            <div class="flex gap-2">
                                <div class="flex-1">
                                    <label class="block text-sm font-medium mb-2">API Key</label>
                                    <input type="password" id="new-api-key" placeholder="gsk_..." class="input">
                                </div>
                                <div class="flex items-end">
                                    <button onclick="addApiKey()" class="btn btn-primary h-10">
                                        <svg class="w-4 h-4 inline-block mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                        Add Key
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Model Selection Tab -->
            <div id="model-tab" class="tab-content">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Model Selection</h2>
                    <p class="text-sm text-muted-foreground mb-4">Select the LLM model to use for all agents</p>
                    <div class="space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="model-list">
                            <!-- Models will be loaded here -->
                        </div>
                        <div class="mt-4 p-4 bg-muted/50 rounded-lg">
                            <h3 class="font-semibold mb-2">Current Model</h3>
                            <p id="current-model" class="text-primary">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Brand Edit Modal -->
    <div id="brand-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
        <div class="card p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4" id="brand-modal-title">Edit Brand</h3>
            <form id="brand-form" class="space-y-4">
                <input type="hidden" id="brand-id">
                <div>
                    <label class="block text-sm font-medium mb-2">Brand Name</label>
                    <input type="text" id="brand-name" class="input" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Industry</label>
                    <input type="text" id="brand-industry" class="input" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Target Audience</label>
                    <textarea id="brand-audience" class="input" rows="2" required></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Brand Voice</label>
                    <textarea id="brand-voice" class="input" rows="2" required></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Core Values (JSON Array)</label>
                    <textarea id="brand-values" class="input" rows="2" placeholder='["value1", "value2"]' required></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Prohibited Topics (JSON Array)</label>
                    <textarea id="brand-prohibited" class="input" rows="2" placeholder='["topic1", "topic2"]' required></textarea>
                </div>
                <div class="flex gap-2 justify-end">
                    <button type="button" onclick="closeBrandModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Agent Edit Modal -->
    <div id="agent-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
        <div class="card p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4" id="agent-modal-title">Edit Agent</h3>
            <form id="agent-form" class="space-y-4">
                <input type="hidden" id="agent-id">
                <div>
                    <label class="block text-sm font-medium mb-2">Agent Name</label>
                    <input type="text" id="agent-name" class="input" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Agent Role</label>
                    <input type="text" id="agent-role" class="input" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Temperature (0-2)</label>
                    <input type="number" step="0.1" min="0" max="2" id="agent-temperature" class="input" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Enabled</label>
                    <input type="checkbox" id="agent-enabled" class="w-4 h-4">
                </div>
                <div class="flex gap-2 justify-end">
                    <button type="button" onclick="closeAgentModal()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/js/settings.js"></script>
</body>
</html>
